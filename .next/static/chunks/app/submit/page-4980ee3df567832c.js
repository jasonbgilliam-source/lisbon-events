(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[369],{2766:function(e,r,s){Promise.resolve().then(s.bind(s,7348))},7348:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return c}});var a=s(7437),n=s(2265),l=s(2835),i=s(357);let o=i.env.NEXT_PUBLIC_SUPABASE_URL,t=i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,d=(0,l.eI)(o,t);function c(){let[e,r]=(0,n.useState)({title:"",description:"",starts_at:"",ends_at:"",location_name:"",address:"",city:"",age:"",price:"",category:"",organizer_email:"",ticket_url:"",image_url:"",youtube_url:"",spotify_url:"",is_free:!1}),[s,l]=(0,n.useState)([]),[i,o]=(0,n.useState)("idle");(0,n.useEffect)(()=>{!async function(){let{data:e,error:r}=await d.from("category_catalog").select("name");r?console.error(r):l(e.map(e=>e.name))}()},[]);let t=s=>r({...e,[s.target.name]:s.target.value}),c=async s=>{s.preventDefault(),o("loading");try{let s=await fetch("/api/submit-event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed to submit");o("success"),r({title:"",description:"",starts_at:"",ends_at:"",location_name:"",address:"",city:"",age:"",price:"",category:"",organizer_email:"",ticket_url:"",image_url:"",youtube_url:"",spotify_url:"",is_free:!1})}catch(e){console.error(e),o("error")}};return(0,a.jsx)("main",{className:"min-h-screen bg-[#fff8f2] text-[#40210f] px-3 py-8",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow-md border border-orange-200 p-5 sm:p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-3 text-[#c94917]",children:"Submit an Event"}),(0,a.jsx)("p",{className:"mb-5 text-sm text-gray-700",children:"Share your Lisbon event with the community! Fill in all details below. Submissions are reviewed before publishing."}),(0,a.jsxs)("form",{onSubmit:c,className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Event Title *"}),(0,a.jsx)("input",{name:"title",type:"text",required:!0,value:e.title,onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Start Date/Time *"}),(0,a.jsx)("input",{name:"starts_at",type:"datetime-local",required:!0,value:e.starts_at,onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"End Date/Time"}),(0,a.jsx)("input",{name:"ends_at",type:"datetime-local",value:e.ends_at,onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Venue *"}),(0,a.jsx)("input",{name:"location_name",type:"text",required:!0,value:e.location_name,onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"City"}),(0,a.jsx)("input",{name:"city",type:"text",value:e.city,onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Address"}),(0,a.jsx)("input",{name:"address",type:"text",value:e.address,onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Price"}),(0,a.jsx)("input",{name:"price",type:"text",disabled:e.is_free,value:e.is_free?"Free":e.price,onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917] ".concat(e.is_free?"bg-gray-100 cursor-not-allowed":"")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Free Event"}),(0,a.jsxs)("select",{name:"is_free",value:e.is_free?"true":"false",onChange:s=>{let a="true"===s.target.value;r({...e,is_free:a,price:a?"Free":""})},className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]",children:[(0,a.jsx)("option",{value:"false",children:"No"}),(0,a.jsx)("option",{value:"true",children:"Yes"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Age Restriction"}),(0,a.jsx)("input",{name:"age",type:"text",value:e.age,onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Organizer Email *"}),(0,a.jsx)("input",{name:"organizer_email",type:"email",required:!0,value:e.organizer_email,onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Category *"}),(0,a.jsxs)("select",{name:"category",required:!0,value:e.category,onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]",children:[(0,a.jsx)("option",{value:"",children:"Select category"}),s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{name:"ticket_url",label:"Ticket URL"},{name:"image_url",label:"Event Image URL"},{name:"youtube_url",label:"YouTube URL"},{name:"spotify_url",label:"Spotify URL"}].map(r=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:r.label}),(0,a.jsx)("input",{name:r.name,type:"url",value:e[r.name],onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]"})]},r.name))}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Description *"}),(0,a.jsx)("textarea",{name:"description",rows:3,required:!0,value:e.description,onChange:t,className:"w-full border border-orange-200 rounded-md p-1.5 focus:ring-1 focus:ring-[#c94917]"})]}),(0,a.jsx)("button",{type:"submit",disabled:"loading"===i,className:"w-full bg-[#c94917] text-white py-2 rounded-md font-semibold hover:bg-[#a53f12] transition",children:"loading"===i?"Submitting...":"success"===i?"✅ Submitted!":"Submit Event"}),"error"===i&&(0,a.jsx)("p",{className:"mt-2 text-red-600 font-medium text-sm",children:"❌ Something went wrong. Please check your entries and try again."})]})]})})}}},function(e){e.O(0,[835,971,23,744],function(){return e(e.s=2766)}),_N_E=e.O()}]);