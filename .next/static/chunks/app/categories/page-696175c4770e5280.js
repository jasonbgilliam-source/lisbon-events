(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{4450:function(e,t,r){Promise.resolve().then(r.bind(r,3868))},3868:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h},dynamic:function(){return d}});var a=r(7437),s=r(2265),n=r(7138),c=r(6648),l=r(2835),o=r(4264),i=r(357);let d="force-dynamic",m=i.env.NEXT_PUBLIC_SUPABASE_URL,x=i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,u=(0,l.eI)(m,x),g=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase();function h(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[i,d]=(0,s.useState)({});(0,s.useEffect)(()=>{!async function(){try{l(!0);let{data:e,error:r}=await u.from("event_submissions").select("category, status").eq("status","approved");if(r)throw r;let{data:a,error:s}=await u.from("category_catalog").select("name").order("name",{ascending:!0});if(s)throw s;let n=(a||[]).map(e=>e.name.trim()),c=n.map(g),o={};(e||[]).forEach(e=>{if(e.category&&""!==e.category.trim()){let t=g(e.category),r=c.indexOf(t);if(r>=0){let e=n[r];o[e]=(o[e]||0)+1}else o.Other=(o.Other||0)+1}});let i=n.map(e=>({name:e,count:o[e]||0})).concat(o.Other?[{name:"Other",count:o.Other}]:[]).sort((e,t)=>e.name.localeCompare(t.name));t(i)}catch(e){console.error("Error loading categories:",e)}finally{l(!1)}}()},[]);let m=(0,s.useMemo)(()=>e,[e,i]);return(0,a.jsx)("main",{className:"min-h-screen bg-[#fff8f2] text-[#40210f]",children:(0,a.jsxs)("section",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center mb-6 text-[#c94917]",children:"Explore by Category"}),(0,a.jsx)(o.Z,{onFilter:d}),(0,a.jsx)("p",{className:"text-center text-gray-600 mb-10",children:"Choose a Lisbon vibe — from concerts and film to culture and cuisine."}),r?(0,a.jsx)("p",{className:"text-center text-gray-600 italic",children:"Loading categories…"}):0===m.length?(0,a.jsx)("p",{className:"text-center mt-10 text-gray-600 italic",children:"No categories found yet."}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:m.map(e=>{let t=e.name.toLowerCase().replace(/\s+/g,"-"),r="/images/".concat(t,".jpeg");return(0,a.jsxs)(n.default,{href:"/categories/".concat(t),className:"bg-white shadow-md hover:shadow-xl rounded-2xl overflow-hidden border border-orange-200 transition transform hover:-translate-y-1",children:[(0,a.jsx)("div",{className:"relative w-full h-56",children:(0,a.jsx)(c.default,{src:r,alt:e.name,fill:!0,sizes:"(max-width: 768px) 100vw, 33vw",className:"object-cover rounded-t-2xl",onError:e=>{e.target.src="/images/default.jpeg"}})}),(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-1 text-[#c94917]",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.count," event",1===e.count?"":"s"]})]})]},t)})})]})})}},4264:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var a=r(7437),s=r(2265),n=r(2835),c=r(357);let l=c.env.NEXT_PUBLIC_SUPABASE_URL,o=c.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,i=(0,n.eI)(l,o);function d(e){let{onFilter:t}=e,[r,n]=(0,s.useState)(""),[c,l]=(0,s.useState)([]),[o,d]=(0,s.useState)([]),[m,x]=(0,s.useState)(!1),[u,g]=(0,s.useState)([]);(0,s.useEffect)(()=>{!async function(){var e;let{data:t,error:r}=await i.from("category_catalog").select("name").order("name",{ascending:!0});if(r){console.error("Error loading categories:",r);return}g(null!==(e=null==t?void 0:t.map(e=>e.name).filter(Boolean))&&void 0!==e?e:[])}()},[]);let h=e=>{t({search:r,categories:c,audience:o,is_free:m,...e})},f=(e,t,r,a)=>{let s=t.includes(e)?t.filter(t=>t!==e):[...t,e];r(s),h({[a]:s})};return(0,a.jsxs)("div",{className:"bg-white border border-orange-200 rounded-2xl p-4 mb-8 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 mb-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search events...",value:r,onChange:e=>{n(e.target.value),h({search:e.target.value})},className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-300"}),(0,a.jsx)("button",{onClick:()=>{n(""),l([]),d([]),x(!1),t({})},className:"px-4 py-2 bg-gray-100 text-[#c94917] border border-[#c94917] rounded-lg hover:bg-orange-50 transition",children:"Clear"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-[#c94917] mb-2",children:"Categories"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:0===u.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Loading…"}):u.map(e=>(0,a.jsx)("button",{onClick:()=>f(e,c,l,"categories"),className:"px-3 py-1 border rounded-full text-sm transition ".concat(c.includes(e)?"bg-[#c94917] text-white border-[#c94917]":"bg-white text-[#c94917] border-[#c94917] hover:bg-orange-50"),children:e},e))})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-[#c94917] mb-2",children:"Audience"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["All Ages","Family","Kids","Teens","Adults"].map(e=>(0,a.jsx)("button",{onClick:()=>f(e,o,d,"audience"),className:"px-3 py-1 border rounded-full text-sm transition ".concat(o.includes(e)?"bg-[#c94917] text-white border-[#c94917]":"bg-white text-[#c94917] border-[#c94917] hover:bg-orange-50"),children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsx)("input",{id:"free",type:"checkbox",checked:m,onChange:e=>{x(e.target.checked),h({is_free:e.target.checked})}}),(0,a.jsx)("label",{htmlFor:"free",className:"text-sm text-gray-700",children:"Show only free events"})]})]})}}},function(e){e.O(0,[231,835,974,971,23,744],function(){return e(e.s=4450)}),_N_E=e.O()}]);