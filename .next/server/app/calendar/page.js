(()=>{var e={};e.id=329,e.ids=[329],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},3338:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(3849),r(1066),r(5866);var s=r(3191),a=r(8716),i=r(7922),n=r.n(i),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3849)),"/workspaces/lisbon-events/app/calendar/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1066)),"/workspaces/lisbon-events/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/workspaces/lisbon-events/app/calendar/page.tsx"],u="/calendar/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/calendar/page",pathname:"/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2506:(e,t,r)=>{Promise.resolve().then(r.bind(r,1344))},1344:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(326),a=r(7577),i=r(8295),n=r.n(i),l=r(7824),o=r.n(l),c=r(1812),d=r(1109),u=r(6226),p=r(434);n().extend(o());let m=process.env.NEXT_PUBLIC_SUPABASE_URL,x=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;(0,c.eI)(m,x);let g=(e,t)=>{let r=n()(e.starts_at),s=e.ends_at?n()(e.ends_at):r;return t.isBetween(r.startOf("day"),s.endOf("day"),null,"[]")};function f(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)({}),[l,o]=(0,a.useState)(n()()),[c,m]=(0,a.useState)(n()()),[x,f]=(0,a.useState)(!0),h=(0,a.useMemo)(()=>e.filter(e=>{if(n()(e.starts_at),r.search&&!`${e.title} ${e.description} ${e.location_name}`.toLowerCase().includes(r.search.toLowerCase()))return!1;if(r.categories&&r.categories.length>0){let t=Array.isArray(e.categories)?e.categories.map(e=>e.toLowerCase()):"string"==typeof e.categories?e.categories.replace(/[{}"]/g,"").split(",").map(e=>e.trim().toLowerCase()):[];if(!r.categories.some(e=>t.includes(e.toLowerCase())))return!1}if(r.audience&&r.audience.length>0){let t=Array.isArray(e.audience)?e.audience.map(e=>e.toLowerCase()):"string"==typeof e.audience?e.audience.replace(/[{}"]/g,"").split(",").map(e=>e.trim().toLowerCase()):[];if(!r.audience.some(e=>t.includes(e.toLowerCase())))return!1}return!r.is_free||!e.price||""===e.price.trim()||"Free"===e.price.trim()}),[e,r]),b=Array.from({length:l.daysInMonth()},(e,t)=>l.date(t+1)),y=Array.from({length:l.startOf("month").day()},()=>null),_=h.filter(e=>g(e,c)),v=e=>e?n()(e).format("MMM D, YYYY h:mm A"):"",j=e=>{if(!e)return null;let t=e.match(/(?:v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return t?`https://img.youtube.com/vi/${t[1]}/hqdefault.jpg`:null},w=e=>e&&e.includes("spotify")?"/images/spotify-cover.jpeg":null;return s.jsx("main",{className:"min-h-screen bg-[#fff8f2] text-[#40210f] px-4 py-10",children:(0,s.jsxs)("section",{className:"max-w-6xl mx-auto",children:[s.jsx("h1",{className:"text-4xl font-bold mb-6 text-center text-[#c94917]",children:"Lisbon Events Calendar"}),s.jsx(d.Z,{onFilter:i}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("button",{onClick:()=>o(l.subtract(1,"month")),className:"px-3 py-1 border border-[#c94917] text-[#c94917] rounded-lg hover:bg-orange-50",children:"← Prev"}),s.jsx("h2",{className:"text-2xl font-semibold",children:l.format("MMMM YYYY")}),s.jsx("button",{onClick:()=>o(l.add(1,"month")),className:"px-3 py-1 border border-[#c94917] text-[#c94917] rounded-lg hover:bg-orange-50",children:"Next →"})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2 text-center font-semibold mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>s.jsx("div",{className:"text-[#c94917]",children:e},e))}),s.jsx("div",{className:"grid grid-cols-7 gap-3 mb-8",children:[...y,...b].map((e,t)=>{if(!e)return s.jsx("div",{},`pad-${t}`);let r=e.isSame(c,"day"),a=h.some(t=>g(t,e)),i="bg-gray-100 text-gray-400";return r?i="bg-[#c94917] text-white border-[#c94917]":a&&(i="bg-white hover:bg-orange-50 border-orange-200"),s.jsx("div",{onClick:()=>m(e),className:`border rounded-xl p-2 h-16 flex items-center justify-center cursor-pointer transition ${i}`,children:e.date()},e.format("YYYY-MM-DD"))})}),x?s.jsx("p",{className:"text-center text-gray-600 mt-10",children:"Loading events…"}):0===_.length?s.jsx("p",{className:"text-center text-gray-600 mt-10 italic",children:"No events have been submitted for this day."}):s.jsx("div",{className:"flex flex-col gap-6 mt-8 transition-all",children:_.map(e=>{let t;if(e.image_url&&""!==e.image_url.trim())t=e.image_url;else if(e.youtube_url&&j(e.youtube_url))t=j(e.youtube_url);else if(e.spotify_url&&w(e.spotify_url))t=w(e.spotify_url);else if(Array.isArray(e.categories)&&e.categories.length>0)t=`/images/${e.categories[0].toLowerCase().replace(/\s+/g,"-")}.jpeg`;else if("string"==typeof e.categories){let r=e.categories.replace(/[{}"]/g,"").split(",")[0];t=`/images/${r?.trim().toLowerCase().replace(/\s+/g,"-")}.jpeg`}else t="/images/default.jpeg";return(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row bg-white border border-orange-200 rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition",children:[s.jsx("div",{className:"relative w-full sm:w-56 h-40 sm:h-auto",children:s.jsx(u.default,{src:t,alt:e.title,fill:!0,className:"object-cover",onError:e=>{e.target.src="/images/default.jpeg"}})}),(0,s.jsxs)("div",{className:"flex-1 p-5",children:[s.jsx("h2",{className:"text-xl font-semibold mb-1 text-[#c94917]",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-700 mb-1",children:["\uD83D\uDCCD ",e.location_name||"Location TBA"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-700 mb-1",children:["\uD83D\uDD52 ",v(e.starts_at),e.ends_at?` – ${v(e.ends_at)}`:""]}),e.price?(0,s.jsxs)("p",{className:"text-sm text-gray-700 mb-1",children:["\uD83D\uDCB6 ",e.price]}):s.jsx("p",{className:"text-sm text-green-700 font-medium mb-1",children:"\uD83C\uDD93 Free"}),e.description&&s.jsx("p",{className:"text-sm text-gray-700 mt-2 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"mt-3 flex flex-wrap gap-3",children:[e.youtube_url&&s.jsx("a",{href:e.youtube_url,target:"_blank",rel:"noreferrer",className:"text-sm text-[#c94917] underline",children:"\uD83C\uDFA5 YouTube"}),e.spotify_url&&s.jsx("a",{href:e.spotify_url,target:"_blank",rel:"noreferrer",className:"text-sm text-[#c94917] underline",children:"\uD83C\uDFB5 Spotify"}),e.address&&s.jsx(p.default,{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.address)}`,target:"_blank",className:"text-sm text-[#c94917] underline",children:"\uD83D\uDDFA️ Map"})]})]})]},e.id)})})]})})}},3849:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var s=r(8570);let a=(0,s.createProxy)(String.raw`/workspaces/lisbon-events/app/calendar/page.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let l=(0,s.createProxy)(String.raw`/workspaces/lisbon-events/app/calendar/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,707,812,285,402],()=>r(3338));module.exports=s})();