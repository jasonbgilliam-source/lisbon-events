"use strict";(()=>{var e={};e.id=650,e.ids=[650],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},8196:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>S,serverHooks:()=>_,staticGenerationAsyncStorage:()=>E});var s={};r.r(s),r.d(s,{GET:()=>c,dynamic:()=>p,revalidate:()=>u});var a=r(9303),n=r(8716),o=r(3131),i=r(474);let p="force-dynamic",u=0;function l(e){if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()}async function c(e){let t=new URL(e.url),r=l(t.searchParams.get("from"))??new Date().toISOString(),s=l(t.searchParams.get("to")),a=t.searchParams.get("category"),n=t.searchParams.get("city"),o=t.searchParams.get("all_ages"),p=(0,i.R)().from("events").select("*").gte("starts_at",r).order("starts_at",{ascending:!0});s&&(p=p.lte("starts_at",s)),a&&(p=p.eq("category",a)),n&&(p=p.eq("city",n)),"true"===o&&(p=p.or('age.is.null,age.eq."All ages"'));let{data:u,error:c}=await p;return c?new Response(JSON.stringify({error:c.message}),{status:500,headers:{"Content-Type":"application/json"}}):new Response(JSON.stringify({items:u??[]}),{headers:{"Content-Type":"application/json","Cache-Control":"no-store"}})}let S=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/events/list/route",pathname:"/api/events/list",filename:"route",bundlePath:"app/api/events/list/route"},resolvedPagePath:"/workspaces/lisbon-events/app/api/events/list/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:E,serverHooks:_}=S,g="/api/events/list/route";function m(){return(0,o.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:E})}},474:(e,t,r)=>{r.d(t,{R:()=>a});var s=r(1657);function a(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL||process.env.SUPABASE_URL||"",t=process.env.SUPABASE_SERVICE_ROLE_KEY||process.env.SUPABASE_SERVICE_KEY||process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"";if(!e||!t)throw Error("Supabase URL or KEY missing. Set NEXT_PUBLIC_SUPABASE_URL and either SUPABASE_SERVICE_ROLE_KEY or NEXT_PUBLIC_SUPABASE_ANON_KEY.");return(0,s.eI)(e,t,{auth:{persistSession:!1}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,561],()=>r(8196));module.exports=s})();