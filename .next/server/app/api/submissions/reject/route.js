"use strict";(()=>{var e={};e.id=442,e.ids=[442],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},5295:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>m,patchFetch:()=>l,requestAsyncStorage:()=>E,routeModule:()=>d,serverHooks:()=>S,staticGenerationAsyncStorage:()=>_});var t={};s.r(t),s.d(t,{POST:()=>c,dynamic:()=>p});var o=s(9303),n=s(8716),i=s(3131),u=s(7070),a=s(474);let p="force-dynamic";async function c(e){try{let{id:r,reviewer:s,notes:t}=await e.json();if(!r)return u.NextResponse.json({error:"Missing submission id"},{status:400});let o=(0,a.R)(),{error:n}=await o.from("event_submissions").update({status:"rejected",reviewer:s??null,review_notes:t??null}).eq("id",r);if(n)return u.NextResponse.json({error:n.message},{status:500});return u.NextResponse.json({ok:!0})}catch(e){return u.NextResponse.json({error:e?.message??"unknown error"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/submissions/reject/route",pathname:"/api/submissions/reject",filename:"route",bundlePath:"app/api/submissions/reject/route"},resolvedPagePath:"/workspaces/lisbon-events/app/api/submissions/reject/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:E,staticGenerationAsyncStorage:_,serverHooks:S}=d,m="/api/submissions/reject/route";function l(){return(0,i.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:_})}},474:(e,r,s)=>{s.d(r,{R:()=>o});var t=s(1657);function o(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL||process.env.SUPABASE_URL||"",r=process.env.SUPABASE_SERVICE_ROLE_KEY||process.env.SUPABASE_SERVICE_KEY||process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"";if(!e||!r)throw Error("Supabase URL or KEY missing. Set NEXT_PUBLIC_SUPABASE_URL and either SUPABASE_SERVICE_ROLE_KEY or NEXT_PUBLIC_SUPABASE_ANON_KEY.");return(0,t.eI)(e,r,{auth:{persistSession:!1}})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[948,561,70],()=>s(5295));module.exports=t})();