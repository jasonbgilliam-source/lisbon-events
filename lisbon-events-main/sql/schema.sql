create extension if not exists pgcrypto; create table if not exists public.events(id uuid primary key default gen_random_uuid(),title text not null,description text,starts_at timestamptz not null,ends_at timestamptz,category text,location_name text,city text default 'Lisbon',address text,ticket_url text,image_url text,created_at timestamptz not null default now()); create table if not exists public.event_submissions(id uuid primary key default gen_random_uuid(),title text not null,description text not null,starts_at timestamptz not null,ends_at timestamptz,location_name text not null,address text,ticket_url text,image_url text,organizer_email text not null,status text not null default 'pending' check (status in ('pending','approved','rejected')),created_at timestamptz not null default now()); alter table public.events enable row level security; alter table public.event_submissions enable row level security; create policy "Public can read events" on public.events for select to anon, authenticated using (true);